fireGuideSaveLink = "";

jQuery(document).ready(function( $ ){

/* Fire Guide Form Page 1 */
$( '.page_1_button' ).click( function() {
	$('#gform_page_33_1').show();
	$('#gform_page_33_2').hide();
	$('#gform_page_33_3').hide();
	$('#gform_page_33_4').hide(); 
});

/* Fire Guide Form Page 2 */
$( '.page_2_button' ).click( function() {
	$('#gform_page_33_1').hide();
	$('#gform_page_33_2').show();
	$('#gform_page_33_3').hide();
	$('#gform_page_33_4').hide();
});

/* Fire Guide Form Page 3 */
$( '.page_3_button' ).click( function() {
	$('#gform_page_33_1').hide();
	$('#gform_page_33_2').hide();
	$('#gform_page_33_3').show();
	$('#gform_page_33_4').hide();  
});

/* Fire Guide Form Page 4 */
	$( '.page_4_button' ).click( function() {
		$('#gform_page_33_1').hide();
		$('#gform_page_33_2').hide();
		$('#gform_page_33_3').hide();
		$('#gform_page_33_4').show();
	});

/* Fire Guide - Style the "Save" (and Continue Later) link  */
$( '#gform_save_33_2_link' ).wrap( '<div class="fire-guide-save-link"></div>' );
$( '#gform_save_33_3_link' ).wrap( '<div class="fire-guide-save-link"></div>' );
$( '#gform_save_33_4_link' ).wrap( '<div class="fire-guide-save-link"></div>' );
$( '#gform_save_33_footer_link' ).wrap( '<div class="fire-guide-save-link"></div>' );



/* Fire Guide - Triggers (clicks on) the return to saved form link after Saving */
	/* Global Variable to store Link generated by Save Function */
	$( '.gform_save_link' ).click(function() {

		var fireGuideSaveLink = saveFireGuide();
		console.log( 'fireGuideSaveLink = ' + fireGuideSaveLink);

	/* Adds a "Reload" link in case the form comes up blank */
	$( '<div class="reload-form-link"><a href="' + fireGuideSaveLink + '">Reload Form</a></div>' ).insertAfter('.fire-guide-save-link');

});

/* Fire Guide - Makes the Secondary Size-Up Label on the Benchmarks a link to the Secondary Size-Up page */
$( '#field_33_30 label' ).click(function() {
	/* Fire Guide Display Page 4 */
		$('#gform_page_33_1').hide();
		$('#gform_page_33_2').hide();
		$('#gform_page_33_3').hide();
		$('#gform_page_33_4').show();
});

/* Fire Guide - Pre-Populates Company Assignments on the Secondary SizeUp page with values from Resources page */
		/* Attack */
		$( '#input_33_5' ).change(function() {
		    $('#input_33_77').val( $(this).val() );
		});
		/* Backup */
		$( '#input_33_6' ).change(function() {
		    $('#input_33_78').val( $(this).val() );
		});
		/* Exposures */
		$( '#input_33_7' ).change(function() {
		    $('#input_33_83').val( $(this).val() );
		});
		/* Search */
		$( '#input_33_9' ).change(function() {
		    $('#input_33_79').val( $(this).val() );
		});
		/* Vent */
		$( '#input_33_10' ).change(function() {
		    $('#input_33_80').val( $(this).val() );
		});
		/* Medical */
		$( '#input_33_14' ).change(function() {
		    $('#input_33_81').val( $(this).val() );
		});
		/* Safety */
		$( '#input_33_1' ).change(function() {
		    $('#input_33_82').val( $(this).val() );
		});

/* Fire Guide - Add Go Back to Main Command Page Button */
$( '<div class="command-go-back-button"><a href="https://ifdresourc.es/command/" class="go-back-link">Go to Mobile Command page</a></div>' ).insertAfter('.gform_page_footer');



/***********************************************************************
*
*			 SPECIAL OPS - Adds Icons to Spoiler Titles 
*
************************************************************************/
$( '.confined-space .su-spoiler-title' ).prepend( '<img src="https://ifdresourc.es/wp-content/uploads/2018/05/confined_space_icon.png" class="special-ops-spoiler-icon">' );
$( '.dive .su-spoiler-title' ).prepend( '<img src="https://ifdresourc.es/wp-content/uploads/2019/05/dive_icon.png" class="special-ops-spoiler-icon">' );
$( '.extrication .su-spoiler-title' ).prepend( '<img src="https://ifdresourc.es/wp-content/uploads/2018/05/extrication-thumbnail-white-background.jpg" class="special-ops-spoiler-icon">' );
$( '.hazmat .su-spoiler-title' ).prepend( '<img src="https://ifdresourc.es/wp-content/uploads/2018/05/hazmat_icon1.png" class="special-ops-spoiler-icon">' );
$( '.rope .su-spoiler-title' ).prepend( '<img src="https://ifdresourc.es/wp-content/uploads/2019/05/rope_rescue_icon.png" class="special-ops-spoiler-icon">' );	
$( '.collapse .su-spoiler-title' ).prepend( '<img src="https://ifdresourc.es/wp-content/uploads/2018/05/collapse_icon-1.png" class="special-ops-spoiler-icon">' );	
$( '.swift-water .su-spoiler-title' ).prepend( '<img src="https://ifdresourc.es/wp-content/uploads/2019/05/top_water_icon.jpg" class="special-ops-spoiler-icon">' );
$( '.trench .su-spoiler-title' ).prepend( '<img src="https://ifdresourc.es/wp-content/uploads/2019/05/trench_icon.png" class="special-ops-spoiler-icon">' );


/*************************************************************************
*
*				 MAJOR INCIDENTS - Adds Icons to Spoiler Titles 
*
***************************************************************************/
$( '.mirv .su-spoiler-title' ).prepend( '<img src="https://ifdresourc.es/wp-content/uploads/2019/05/mirv-icon.png" class="special-ops-spoiler-icon">' );
$( '.mci .su-spoiler-title' ).prepend( '<img src="https://ifdresourc.es/wp-content/uploads/2019/05/mci_icon.png" class="special-ops-spoiler-icon">' );
$( '.active-shooter .su-spoiler-title' ).prepend( '<img src="https://ifdresourc.es/wp-content/uploads/2019/05/active-shooter-gun-icon.png" class="special-ops-spoiler-icon">' );
$( '.aircraft .su-spoiler-title' ).prepend( '<img src="https://ifdresourc.es/wp-content/uploads/2019/05/airplane-icon.png" class="special-ops-spoiler-icon">' );


/* ---------------------------------------

			Javascript Functions

------------------------------------------ */

function saveFireGuide() { 

	setTimeout(function() {
		/* Displays "Saving..." on the screen to let the user know it's saving */
		/* The delay is needed to allow enough time for the link to be generated before trying to auto-click it */
		$( '.form_saved_message' ).before( '<div class="saving-fire-guide">Saving...</div>' );

		/* Save Form Link to a Variable */
		fireGuideSaveLink = $( 'a.resume_form_link' ).text();

		/* Auto-Click on link to reload the form after saving */
		$( 'a.resume_form_link' )[0].click();

	}, 1800);

}


}); // end document ready